{% extends "blog/base.html" %}
{% block title %}andywrote.me | blog{% endblock %}
{% block content %}
<h2>
  {%- if post is defined -%}
    Edit post: {{ post.title|safe }}
  {%- else -%}
    New post
  {%- endif -%}
</h2>
<form method="POST" action="/blog/write">
  {{ form.hidden_tag() }}
  {{ form.title(id="write-title", placeholder="Title (plaintext)") }}
  {%- if form.title.errors -%}
    <ul class="submit-error-list">
      {%- for error in form.title.errors -%}
        <li class="submit-error">{{ error }}</li>
      {%- endfor -%}
    </ul>
  {%- endif -%}
  {{ form.tag_list(id="write-tags", placeholder="Tags (comma-separated)") }}
  {%- if form.tag_list.errors -%}
    <ul class="submit-error-list">
      {%- for error in form.tag_list.errors -%}
        <li class="submit-error">{{ error }}</li>
      {%- endfor -%}
    </ul>
  {%- endif -%}
  {{ form.body(id="write-body", placeholder="Whatever you have to say (HTML, though it will be sanitized)") }}
  {%- if form.body.errors -%}
    <ul class="submit-error-list">
      {%- for error in form.body.errors -%}
        <li class="submit-error">{{ error }}</li>
      {%- endfor -%}
    </ul>
  {%- endif -%}
  <div class="write-options">
    {{ form.convert_breaks(id="convert-breaks", checked=True) }} Convert line breaks to paragraphs<br/>
    {{ form.use_smartypants(id="use-smartypants", checked=True) }} Use <a href="http://daringfireball.net/projects/smartypants/">SmartyPants</a> (curls quotation marks except in tags like &lt;pre&gt;, etc.)
  </div>
  <div>
    <input type="submit" value="Post" />
  </div>
</form>
{% endblock %}